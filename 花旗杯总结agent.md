## 总结板块的Agent的核心要求

生成经验-->该经验是为了修正模拟市场中的agent，使他们的行为和他们行为造成的价格走势都趋向于历史真实数据





## 模块输入



1. 输入的新闻
2. 分析板块对该新闻的分析-->情绪+行为趋势
3. 历史真实的对该新闻的分析-->情绪+行为趋势
4. 模拟市场板块数据
5. 真实的价格走势数据



## 模块输出

自然语言形式的文本



## 模块设计

我参考了reflexion的框架。以总结部分的视角看，整个项目可以分为三部分：

1. actor --> 新闻分析+市场模拟
2. evaluator --> 对模拟的结果打分
3. reflection -->对比模拟数据和真实数据，生成经验，用于指导下一次的模拟

### 评估模块

打分对象: 我们模拟出的市场价格曲线/新闻

打分规则: 模拟曲线和真实曲线夹起来的脱锚的面积差异，最大脱锚幅度差，脱锚面积比

​					新闻部分目前尚待细化



### 反思模块

### new block

首先根据评分器评价，得到本次模拟的得分 --> 得分是一个连续值

如果模拟得很好，那么不做处理

如果模拟效果不好，生成反思

带着反思重新模拟一次

如果本次模拟得分比上次高-->将这个反思存入经验中



(ps:如果单次模拟时间不长，可以考虑持续地反思模拟，直到我们认为模拟出的曲线足够好，即得分大于阈值K

初始化反思集

模拟出曲线

计算得分

while score<K do:

​	生成反思文本

​	带着该反思文本进行第i次模拟

​	如果第i次模拟比第i-1次模拟好

​	则奖励该反思文本

​	将被奖励的反思文本按照[反思文本,奖励数值]的方式存入反思集

(跳出循环，证明本次的模拟效果已经比较好)	

总结反思集得出经验/按照奖励数值降序选取前k个反思文本存入经验

)

经验存入数据库

